
{% load static %}
<!DOCTYPE html>
<html>
<head>
    <title>Events</title>
</head>
<body>

<h1>Events</h1>

{% if messages %}
    <ul>
        {% for message in messages %}
            <li>{{ message }}</li>
        {% endfor %}
    </ul>
{% endif %}

{% for event in events %}
    <div style="border:1px solid #ccc; padding:10px; margin-bottom:10px;">
        <h3>{{ event.name }}</h3>
        <p>{{ event.description }}</p>
        <p>Date: {{ event.date }}</p>
        <p>Location:{{ event.location}}</p>

        {% if user.is_authenticated %}
            {% if event.id in applied_event_ids %}
                <button disabled>Already Applied</button>
            {% else %}
                <form method="POST" action="{% url 'apply_event' event.id %}">
                    {% csrf_token %}
                    <input type="password" name="password" placeholder="Enter your password" required>
                    <button type="submit">Apply</button>
                </form>
            {% endif %}
        {% else %}
            <p>Please log in to apply.</p>
        {% endif %}
    </div>
{% endfor %}

</body>
</html>
